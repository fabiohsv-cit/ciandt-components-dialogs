/*
 ng-jedi-dialogs v0.0.5
 Dialogs component written in angularjs
 https://github.com/jediproject/ng-jedi-dialogs
*/

!function(a){return"function"!=typeof define?("undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="jedi.dialogs"),a()):void define(["angular","ng-jedi-layout-impl"],a)}(function(){"use strict";angular.module("jedi.dialogs",["jedi.layout.impl"]),angular.module("jedi.dialogs").constant("jedi.dialogs.DialogsConfig",{templateUrlAlert:"assets/libs/ng-jedi-dialogs/dialogs-alert.html",templateUrlConfirm:"assets/libs/ng-jedi-dialogs/dialogs-confirm.html",applyJdi18nToast:!0,alertTitle:"Attention!",confirmTitle:"Attention!",alertOkLabel:"Ok",confirmYesLabel:"Yes",confirmNoLabel:"No"}).factory("$$materializeStackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).factory("$materializeModalStack",["$timeout","$document","$compile","$rootScope","$$materializeStackedMap",function(a,b,c,d,e){function f(a){var c=b.find("body").eq(0),d=i.get(a).value;i.remove(a),g(d.modalDomEl,d.modalScope,300,function(){d.modalScope.$destroy(),c.toggleClass(h,i.length()>0)})}function g(a,b,c,d){function e(){e.done||(e.done=!0,a.closeModal(),d&&d())}b.animate=!1,e()}var h="modal-open",i=e.createNew(),j={};return b.bind("keydown",function(a){var b;27===a.which&&(b=i.top(),b&&b.value.keyboard&&(a.preventDefault(),d.$apply(function(){j.dismiss(b.key,"escape key press")})))}),j.open=function(a,d){i.add(a,{deferred:d.deferred,modalScope:d.scope,backdrop:d.backdrop,keyboard:d.keyboard});var e=b.find("body").eq(0),f=d.content.trim(),g=angular.element(f),j=c(g)(d.scope);i.top().value.modalDomEl=j,e.append(j),j.openModal({dismissable:d.keyboard,complete:function(){j.remove()}}),e.addClass(h)},j.close=function(a,b){var c=i.get(a);c&&(c.value.deferred.resolve(b),f(a))},j.dismiss=function(a,b){var c=i.get(a);c&&(c.value.deferred.reject(b),f(a))},j.dismissAll=function(a){for(var b=this.getTop();b;)this.dismiss(b.key,a),b=this.getTop()},j.getTop=function(){return i.top()},j}]).provider("$materializeModal",function(){var a={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$materializeModalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?d.when(a.template):e.get(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl,{cache:f}).then(function(a){return a.data})}function j(a){var c=[];return angular.forEach(a,function(a){(angular.isFunction(a)||angular.isArray(a))&&c.push(d.when(b.invoke(a)))}),c}var k={};return k.open=function(b){var e=d.defer(),f=d.defer(),k={result:e.promise,opened:f.promise,close:function(a){h.close(k,a)},dismiss:function(a){h.dismiss(k,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var l=d.all([i(b)].concat(j(b.resolve)));return l.then(function(a){var d=(b.scope||c).$new();d.$close=k.close,d.$dismiss=k.dismiss;var f,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=k,angular.forEach(b.resolve,function(b,c){i[c]=a[j++]}),f=g(b.controller,i),b.controllerAs&&(d[b.controllerAs]=f)),h.open(k,{scope:d,deferred:e,content:a[0],backdrop:b.backdrop,keyboard:b.keyboard,backdropClass:b.backdropClass,windowClass:b.windowClass,windowTemplateUrl:b.windowTemplateUrl,size:b.size})},function(a){e.reject(a)}),l.then(function(){f.resolve(!0)},function(){f.reject(!1)}),k},k}]};return a}).controller("jedi.dialogs.AlertCtrl",["$scope","$modalInstance","jedi.dialogs.DialogsConfig","items",function(a,b,c,d){a.items=d,a.alertTitle=c.alertTitle,a.alertOkLabel=c.alertOkLabel,a.ok=function(){b.close()}}]).controller("jedi.dialogs.ConfirmCtrl",["$scope","$modalInstance","jedi.dialogs.DialogsConfig","message",function(a,b,c,d,e,f){a.message=d,a.confirmTitle=c.confirmTitle,a.confirmYesLabel=c.confirmYesLabel,a.confirmNoLabel=c.confirmNoLabel,a.ok=function(){b.close()}}]).factory("jedi.dialogs.AlertHelper",["$injector","jedi.dialogs.DialogsConfig",function(a,b){function c(a){0==h.length&&(e=g.open(b.templateUrlAlert,void 0,void 0,void 0,{controller:"jedi.dialogs.AlertCtrl",windowClass:"alert-modal-window",resolve:{items:function(){return h}}}),e.result.then(d,d)),angular.forEach(a,function(a,b){var c=!1;angular.forEach(h,function(b,d){return a.message==b.message?void(c=!0):void 0}),c||h.push(a)})}function d(){h=[],e=null}var e,f,g=a.get("jedi.dialogs.ModalHelper"),h=[];return{confirm:function(a,c,d){f=g.open(b.templateUrlConfirm,void 0,void 0,void 0,{controller:"jedi.dialogs.ConfirmCtrl",backdrop:"static",keyboard:!1,windowClass:"alert-modal-window",resolve:{message:function(){return a},onOk:function(){return c},onCancel:function(){return d}}}),f.result.then(function(){f=null,c&&c()},function(){f=null,d&&d()})},addMessages:function(a,b){var d=[];angular.isArray(a)?angular.forEach(a,function(a){d.push({message:a,type:b})}):d.push({message:a,type:b}),c(d)},addInfo:function(a){"string"==typeof a?this.addMessages(a,"text-info"):c(a)},addError:function(a){"string"==typeof a?this.addMessages(a,"text-danger"):c(a)},addWarn:function(a){"string"==typeof a?this.addMessages(a,"text-dangerwarning"):c(a)},close:function(){e&&e.close(),f&&f.close()}}}]).factory("jedi.dialogs.Modal",["$injector",function(a){function b(b){var c=a.get("$materializeModal");this.instance=c.open(b),this.result=this.instance.result}return b.prototype.open=function(){return this.instance.open.apply(this.instance.open,arguments)},b.prototype.close=function(){return this.instance.close.apply(this.instance.close,arguments)},b.prototype.dismiss=function(){return this.instance.dismiss.apply(this.instance.dismiss,arguments)},b}]).factory("jedi.dialogs.ModalHelper",["jedi.dialogs.Modal","$injector","$log",function(a,b,c){var d=[],e="destroy";return{open:function(b){var c,f,g,h,i,j=0;arguments.length>1&&("string"==typeof arguments[1]||_.isArray(arguments[1]))&&(c=arguments[1],j++),arguments.length>1+j&&("undefined"==typeof arguments[j+1]||"object"==typeof arguments[j+1])&&(f=arguments[j+1],j++),arguments.length>1+j&&("undefined"==typeof arguments[j+1]||"function"==typeof arguments[j+1])&&(g=arguments[j+1],j++),arguments.length>1+j&&("undefined"==typeof arguments[j+1]||"function"==typeof arguments[j+1])&&(h=arguments[j+1],j++),arguments.length>1+j&&(i=arguments[j+1]);var k=["$scope"],l={};angular.forEach(f,function(a,b){k.push(b),"function"!=typeof a?l[b]=function(){return a}:l[b]=a}),!c&&f&&(k.push(function(a){var b=arguments,c=1;angular.forEach(f,function(d,e){a[e]=b[c],c++})}),c=k);var m=c&&!_.isArray(c)?c.split(/[. ]+/).pop():void 0;m&&(m=m.charAt(0).toLowerCase()+m.slice(1));var n={templateUrl:b,controller:c,controllerAs:m,backdrop:"static",resolve:l};i=i?angular.extend(n,i):n;var o=new a(i);return d.push(o),o.result.then(function(){d=_.filter(d,function(a){return a!==o}),!g||1==arguments.length&&arguments[0]===e||g.apply(g,arguments)},function(){d=_.filter(d,function(a){return a!==o}),!h||1==arguments.length&&arguments[0]===e||h.apply(h,arguments)}),o},closeAll:function(){angular.forEach(d,function(a){a.dismiss(e)})}}}]).run(["$templateCache","jedi.dialogs.DialogsConfig","jedi.layout.impl.Dialogs",function(a,b,c){b.applyJdi18nToast&&a.put("directives/toast/toast.html",'<div class="{{toastClass}} {{toastType}}" ng-click="tapToast()">\n  <div ng-switch on="allowHtml">\n    <div ng-switch-default ng-if="title" class="{{titleClass}}" jd-i18n>{{title}}</div>\n    <div ng-switch-default class="{{messageClass}}" jd-i18n>{{message}}</div>\n    <div ng-switch-when="true" ng-if="title" class="{{titleClass}}" ng-bind-html="title"></div>\n    <div ng-switch-when="true" class="{{messageClass}}" ng-bind-html="message"></div>\n  </div>\n  <progress-bar ng-if="progressBar"></progress-bar>\n</div>\n'),a.put("assets/libs/ng-jedi-dialogs/dialogs-alert.html",c.alert),a.put("assets/libs/ng-jedi-dialogs/dialogs-confirm.html",c.confirm)}])});
//# sourceMappingURL=dialogs.min.map